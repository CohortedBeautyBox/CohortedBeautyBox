<div class="container">
  <div class="collection-list-ul">
    <div class="text-container-wrapper">
      <h2>{{ section.settings.title }}</h2>
      <div class="description-before"><span></span>{{ section.settings.text }}</div>
    </div>
    {% for block in section.blocks %}
    {%- assign collection = collections[block.settings.collection] -%} 
    <div class="collection-list-li">
      {%- if collection.image -%}
      {%- assign collection_image = collection.image -%}
      {%- elsif collection.products.first and collection.products.first.images != empty -%}
      {%- assign collection_image = collection.products.first.featured_image -%}
      {%- else -%}
      {%- assign collection_image = blank -%}
      {%- endif -%}

      <a href="{{ collection.url }}">
        <img src="{{ collection_image | img_url: '480x' }}" alt="">
        <span>{{ collection.title }} <img style="width:30px; height:18px;" src="{{ section.settings.icon | img_url: '30x' }}"></span>
      </a>
    </div>
    {%- endfor -%}
  </div>
</div>


{% schema %}
  {
    "name": "Collection list",
    "class": "collection-list-section",
    "settings": [
      {
        "type": "text",
        "id": "title",
        "label": "Heading",
        "default": "Collection list"
      },
	{
      "type": "richtext",
      "id": "text",
      "label": "Text",
      "default": "<p>Use this text to share information about your brand with your customers. Describe a product, share announcements, or welcome customers to your store.</p>"
    },
{
        "type": "image_picker",
        "id": "icon",
        "label": "Collection Title Icon"
}

    ],
    "blocks": [
      {
        "type": "featured_collection",
        "name": "Collection",
        "settings": [
          {
            "label": "Collection",
            "id": "collection",
            "type": "collection"
          }
        ]
      }
    ],
    "presets": [
      {
        "name": "Collection list",
        "category": "Collection",
        "blocks": [
          {
            "type": "featured_collection"
          },
          {
            "type": "featured_collection"
          },
          {
            "type": "featured_collection"
          }
        ]
      }
    ]
  }
{% endschema %}
